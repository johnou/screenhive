generator client {
  provider = "prisma-client-js"
}

generator typegraphql {
  provider = "typegraphql-prisma"
}

datasource db {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}


model User{
  id Int @id @default(autoincrement())
  username String @db.VarChar(50)
  email String @db.VarChar(100)
  password String @db.VarChar(255)
  dob DateTime @db.Date
  registered DateTime @db.Date
  verified Boolean @db.Boolean @default(false)
  lastLogin DateTime @db.Timestamp()
  role Int @db.SmallInt @default(0)
  revokedTokens RevokedToken[]
}


model RevokedToken{
  userId Int 
  token String  @db.VarChar(255)
  expiry DateTime @db.Timestamp()
  user User @relation(fields: [userId], references: [id])
  @@id([userId, token])
}